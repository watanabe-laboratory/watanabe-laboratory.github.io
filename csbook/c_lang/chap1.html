<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="lecture.css">
</head><body>

<h1><span class="title">C言語入門</span><br />第 01 章　プログラミングの準備</h1>

<div class="frame">
<h2>講義の目的</h2>

<p>この講義ではプログラミング初学者が、自身の研究活動のためにC言語によるプログラミングが可能になることを目的としています。受講者の皆さんには、講義を通して研究の目的達成手段としてのプログラミング手法を習得してもらうこととなります。このため、プログラミングの知識については、情報科学の視点ではなく「○○を実現するために必要な機能」という視点で解説をしていきます。</p>

<h2>本講義の目指すもの</h2>

<div><p>
C言語に限らず、プログラミング全般にいえることですが、<strong>単に文法を理解しただけでは実際的なプログラムを組むことはできません</strong>。本講義では、文法の解説にとどまらず、実際的な使い方やサンプルプログラムをできるだけ例示しながら解説をしていきます。最終的には以下のことを目標とします。
</p>

<ul><li>C言語の基本文法を理解する
  <ol><li>プログラミングの流れ
    </li><li>変数の利用と代入の概念
    </li><li>関数の宣言と使い方
    </li><li>制御構造
    </li><li>配列と構造体
    </li><li>ポインタとメモリの管理
  </li></ol>
</li><li>C言語を研究に活かせるようにする
  <ul><li>行列を利用して連立方程式を解くプログラムを作成できるようになる
  </li></ul>
</li></ul></div>

<h2>前提とするオペレーティング・システム</h2>

<p>本講義で扱うC言語の学習範囲は、基本的にオペレーティングシステムに依存しません。しかし、開発環境の利用方法についてはオペレーティングシステムに よって異なることがあります。本講義では Windows XP あるいは Mac OS X での演習を前提とします。また C99 規格に対応したコンパイラを使うことを想定していますが、C言語の解説自体は厳密に C99 規格に沿ったものではありません。「ふつうの」C言語の解説とでもいうような内容になっています。</p>

<h2>本講義の流れ</h2>

<div><p>本講義は 13 回構成となります。それぞれの回の概要は以下のとおりです。</p>

<ul><li>第 1 回 プログラミングの準備</li><li>第 2 回 算術演算と変数</li><li>第 3 回 関数の作成と利用</li><li>第 4 回 制御構造</li><li>第 5 回 キーボードと画面による入出力</li><li>第 6 回 配列と文字列の扱い</li><li>第 7 回 配列と文字列・応用編</li><li>第 8 回 ファイルの入出力</li><li>第 9 回 ポインタと配列</li><li>第 10 回 構造体</li><li>第 11 回 ポインタとリスト構造</li><li>第 12 回 プログラムのモジュール化</li><li>第 13 回 総合演習：連立方程式を解く</li></ul></div>

<h2>今回の目標</h2>

<div><p>
今回は、プログラミングのための環境作りと簡単なプログラムを作成します。
これをとおして以下のことを理解できるようにします。
</p>

<ol><li>C言語プログラムの開発手順を理解する。</li><li>C言語プログラムの基本的な構文を理解する。</li></ol></div>

<h2>プログラムを動かしてみる</h2>

<div><p>
本講義の最初の内容として、プログラミング環境を用意します。一般にプログラミングを行うためには、プログラミングのための環境を用意する必要があります。本講義において、プログラミング環境の用意は大きく以下の二つの作業に分けられます。
</p>

<ol>
<li>コンパイル環境の用意</li>
<li>統合開発環境（IDE: Integrated Development Environment）の用意</li>
</ol>


<p>
手順は Windows 環境と Mac OS 環境で異なりますので、それぞれ以下のリンク先のページを参考にしてインストールと Hello World プログラムのコンパイル〜実行を行ってください。
</p>

<ol>
<li><a href="http://www.csg.is.titech.ac.jp/%7Echiba/lecture/clang/tools/install_win.html">Windows 環境の場合</a></li>
<li><a href="http://www.csg.is.titech.ac.jp/%7Echiba/lecture/clang/tools/install_mac.html">Mac OS 環境の場合</a></li>
</ol>
</div>

<h2>プログラム実行の仕組み</h2>

<blockquote>
<p>プログラミングを始める前に、プログラミングとはどのような作業なのか、その仕組みを説明します。
</p>

<h3>プログラミング言語とは？</h3>

<p>プログラミング言語とは、コンピュータに計算を行わせる手順を記述するための特殊な言語を指します。
プログラミング言語は、コンピュータが処理しやすい言語となっているため、我々が日常利用してる日本語や英語のような自然言語とはかなり異なる言語になっています。（比較的英語に似た文法の言語が多いと言われていますが。）プログラミング言語には、用途や考え方によって最適化された、さまざまな種類が作成されています。（古くは COBOL, Fortran など、最新では Ruby, Python, Groovy といった言語です。）ここでは 1960 年末期から 1970 年初めに誕生し、現在に至るまで幅広く使われ続けている<span class="word">C言語</span>を用いることにします。</p>

<h3>プログラミングの流れ</h3>

<p>C言語によるプログラミングは大まかに以下の手順に分かれます。 それぞれの手順について説明します。</p>
<ol>
<li>ソースコードを作成する</li>
<li>コンパイルしてコンピュータが解釈可能な実行ファイルへ翻訳する</li>
<li>実行可能ファイルを実行する</li>
</ol>

<p>プログラミング言語によって多少変化はありますが、基本的な流れはどの言語でも上記のとおりです。</p>

<div style="text-align:center">
<a href="01_compile.png">
<img class="fig" src="01_compile.png"/></a>
<p>（クリックで図が拡大）</p>
</div>
<h3>ソースファイルの作成</h3>

<p>C言語プログラムが書かれたファイルのことを<span class="word">ソースファイル</span>と呼びます。C言語のソースファイルは拡張子を c にするのが一般的です。 さきほど作成した Hello World プログラムでは、ソースファイルの名前は HelloWorld.c になっています。<br><br>ソースファイルは一般的なテキストファイルですが、打ち込む文字は文字列の中以外は半角文字である必要があります。全角を入れてしまうと次に説明する<span class="word">コンパイルエラー</span>が発生し、実行ファイルが作成されません。特に全角空白は日本語入力を ON にした状態では誤って入力しやすいため、注意してください。</p>

<h3>コンパイルして実行可能ファイルを作成する</h3>

<p>ソースファイルに記述されたプログラミング言語は、そのままではコンピュータが実行することはできません。 ソースファイルを実行可能ファイルに変換して、はじめてコンピュータで実行ができます。このソースファイルを解釈して、実行ファイルへ変換する作業のことを<span class="word">コンパイル</span>と呼びます。またコンパイルを実行するプログラムのことをコンパイラと呼び、C言語用の<span class="word">コンパイラ</span>はしばしばCコンパイラと呼ばれます。<br><br>※実行ファイルとは Windows では拡張子が exe のファイルのことです。<br><br>ソースファイルの内容にC言語の規則に違反している部分があると、コンパイラは<span class="word">コンパイルエラー</span>として、エラーメッセージを表示し、実行ファイルの作成を中止してしまいます。エラーメッセージから、エラーの原因やエラーになった行番号がわかるので、コンパイルエラーがなくなるまでソースファイルを編集して直さなければなりません。<br><br>また、一般にソースファイルの内容もしくはその一部を、<span class="word">ソースコード</span>と呼びます。<br><br>また、コンパイラはコンパイルエラー以外にも、警告 (warning) と呼ばれるメッセージを表示することがあります。このメッセージは、プログラムが構文的には間違っていないものの、正しく動作しない可能性があるときに表示されます。本講義で紹介するソースコードでも、コンパイラが警告を表示する場合がありますが、本講義では簡略化のために警告には対処しないこととします。</p>

<h3>実行可能ファイルを実行する</h3>

<p>コンパイルが成功すると、実行可能ファイルが作成されます。 実行可能ファイルは、通常のアプリケーションと同じように実行させることができます (というより、通常のアプリケーションの実体は実行可能ファイルです)。一般に実行可能ファイルには、ソースファイルと同じ名前をつければよいでしょう。 たとえば、ソースファイルの名前が HelloWorld.c であれば、実行可能ファイルの名前は HelloWorld.exe とすればよいでしょう。</p>

<h3>統合開発環境</h3>

<p>プログラミングには 3 つの手順に分かれることを説明しました。これらの手順を効率良く実施するための補助をしてくれるのが統合開発環境です。統合開発環境を使えばソースコードのコンパイル、エラー部分の表示、実行可能ファイルの実行といった作業を効率よく実施することができるため、プログラムの作成に集中することができます。</p>
<p>C言語の統合開発環境にはさまざまなものがありますが、本講義では Windows, MacOS X, Linux などさまざまな環境で利用できる Eclipse + CDTを利用します。</p>

<h3>参考文献</h3>

<p>ソースコードから実行可能ファイルが作成される詳細なしくみや、実行可能ファイルの中身を知りたいときは、以下の参考文献が役に立つかもしれません。</p>
<p>『プログラムはなぜ動くのか？第 2 版　知っておきたいプログラミングの基礎知識』、矢沢 久雄、日経ソフトウェア、2007</p>

</blockquote>
<h2>C言語の基本構文</h2>

<blockquote>
<p>冒頭の「プログラムを動かしてみる」で入力したソースコードを例に、C言語の基本文法について説明します。</p>

<div><pre class="code">
#include &lt;stdio.h&gt;

int main() {
    printf("Hello, World\n");
    return 0;
}</pre></div>

<h3>1 行目　プリプロセッサ命令</h3>

<p>1 行目はプリプロセッサ命令と呼ばれる特殊な命令です。初学者にとっては本質的な部分ではないので、本講義では解説しません。「プログラムの先頭には必ずこの 1 行を書く」というルールと理解してください。</p>

<h3>3 行目　main 関数</h3>

<p>3 行目の</p>

<div><pre class="code">int main() {</pre></div>

<p>から 6 行目の</p>

<div><pre class="code">}</pre></div>

<p>までは、main 関数の定義です。C言語で書かれたプログラムをコンパイルして実行すると、（他に別な関数が定義されていても）必ずこの main 関数の計算が実行されることになっています。したがって、やりたい計算をおこなうように main 関数を定義する作業が、すなわちプログラムを書く作業となります。main 関数の計算内容は <span class="cbox">{</span> と <span class="cbox">}</span> の間に書きます。</p>

<div><p>なお、ここでいう関数とは、数学における関数とは意味が少し異なるので注意してください。 C言語における関数は「やらせたい計算内容をまとめたもの」です。 関数の詳細については第 3 回で説明します。</p></div>

<h3>4 行目　printf 関数</h3>

<p>main 関数が最初に実行する「計算」は字句の表示です。</p>

<div><pre class=code>Hello, World</pre></div>

<p>という一行を表示します。この行のような文字の並びのことを、C言語では<span class="word">文字列</span>といいます。つまり、最初に実行する「計算」は文字列の表示なのです。</p>
<p>文字列の表示が「計算」であるとは奇妙に感じるかもしれません。コンピュータにとっては計算に違いないのですが、無用の混乱をさけるため、「計算」といわずに素直に「処理」という言い方もあります。</p>
<p>main 関数が最初に実行する処理は字句の表示です。</p>
<p>この方がわかりよいでしょうか？</p>
<p>どういう言い方をするにせよ、文字列を表示するためには、printf 関数をコンピュータに計算（処理）させます。printf に続く括弧の中が関数の引数で、printf 関数を計算させると、この引数の文字列が表示されます。プログラムの 4 行目は、main 関数が最初に計算するのが printf 関数であることを指示しています。</p>

<h3>文字列</h3>

<p>C言語のプログラム中では、"（ダブルクオーテーション）で囲まれた文字の並びが文字列です。 " で囲った中には、改行以外の自由な文字を書くことができます。漢字などの全角文字も書けます。改行文字を含めたい場合には \n（円マーク、小文字のn）で表現します。つまり、"Hello, World\n" は、表示すると</p>

<div><pre class=code>Hello, World</pre></div>

<p>が表示された後に改行される文字列です。歴史的な理由により、行末に改行文字という見えない特別な文字を表示すると、改行（行替え）がおこり、続いておこなわれる表示が下の行に表示されるようになります。<br><br>なお、Mac OS 環境では、「\n」は「バックスラッシュ、小文字のn」と表示されますのでそのように読みかえてください。Mac OS でバックスラッシュを入力するには、<span class="cbox">Option</span> + <span class="cbox">¥</span> キーを押下します（使用しているソフトウェアによっては <span class="cbox">Option</span> キーは不要）。</p>

<h3>文の区切り</h3>

<p>C言語のプログラムでは、一つ分の処理の記述を<span class="word">文</span>と呼びます。例えば</p>

<div><pre class=code>printf("Hello, World\n");</pre></div>

<p>は文です。<br><br>文の末尾（区切り）を示すのが ;（セミコロン）です。C言語では文の最後に必ず ; を書きます。書かなければコンパイルエラーになります。なお 1 行にいくつもの文を続けて書くこともできますが、一般には読みやすさを重視して、1 行には 1 文しか書きません。</p>

<h3>printf で数値を表示</h3>

<p>printf 関数は、続く括弧の中に書く引数を工夫すれば、単純な文字列以外に数値などさまざまな情報を表示することができます。たとえば、printf 関数の括弧の中の文字列に %d が含まれていると、printf 関数は&nbsp; 2 番目の引数の値で 1 番目の引数の文字列の中の %d を置き換えて表示します。</p>

<div><pre class="code">
printf("There are %d eggs.\n", 3);
printf("There are %d eggs.\n", 3 + 5);
</pre></div>

<div>この例ではそれぞれ</div>

<div><pre class="code">
There are 3 eggs.
There are 8 eggs.</pre></div>

<p>と表示されます。printf 関数の 2 番目の引数が計算式である場合は、その計算結果の値で %d を置き換えます。これは計算結果の表示に便利です。</p>

<h3>5 行目　return 文</h3>

<p>関数の値（計算結果）を決めるのが return 文です。 C言語における関数の値は一般的に<span class="word">戻り値</span>と呼ばれます。関数の計算が始まると、先頭の文から書かれた計算を順に実行してゆきますが、return 文で計算は終わりです。return に続いて書かれた値が、その関数の最終的な値となります。</p>

<p>ここでは</p>

<div><pre class=code>return 0;</pre></div>

<p>となっているので関数の値は必ず 0 です。main 関数の主要な処理は、文字列を表示することでしたから、実は戻り値はなんでもよいわけですが、ここでは慣例にしたがって 0 にします。</p>
<p>値が常に 0 の関数など、わざわざ計算しなくてもよいわけですが、上のプログラムの場合、計算し直すたびに、計算の<span class="word">副作用</span>として文字列が表示されます。ですから、こんな関数でも計算することに意義があるのです。</p>

<h3>ソースコードの読みやすさ</h3>

<blockquote>
<p>多くのプログラミング言語には、人間がソースコードを読みやすくするための方法が用意されています。このためにC言語が用意している方法のうち、ここでは
インデントとコメントについて紹介します。どちらも人間のためのものですから、使っても使わなくても、プログラムの意味（プログラムを実行したときに、ど
ういう計算・処理がおこなわれるか）は変わりません。</p>

<h4>インデント</h4>

<p>インデントとはプログラムを読みやすくするために、関連する行ごとに段をつけて先頭の桁をそろえることです。 C言語では、改行、半角スペース（空白）とタブ文字は何個あっても半角スペース１個と同じと見なされるため、上で示したプログラムは次のように書き直しても同じ意味になります。</p>

<div><pre class=code>
#include <stdio.h>
int main() {
printf("Hello, World\n");
return 0;
}
</pre></div>

<p>しかし段をつけた方が処理のかたまりを認識しやすいため、最初に示したように関数内の処理などは段をつけて先頭の桁を揃えるようにするのが一般的です。このような桁揃えのことをインデント (indentation) と呼びます。</p>

<h4>コメント</h4>

<p>複雑なプログラムになると、一読しただけではどのような処理をするのかが分かりにくくなります。 そこでプログラムの自由な位置に自由に説明文を書き込める機能が用意されています。これをコメントといいます。</p>
<p>C言語では <span class="word">/*</span> と<span class="word"> */</span> で囲まれた部分は、ないものとして扱われます。</p>
<p>そのため、この間には以下のように自由にプログラムの説明を記述できます。</p>

<div><pre class=code>
#include &lt;stdio.h&gt;

/* Hello Worldを表示するプログラム */
int main() {
    printf("Hello, World\n"); /* 文字を表示するプログラム */
    return 0;
}</pre></div>

</blockquote>
<h3>まとめ</h3>

<p>以上で、Hello World プログラムの内容をすべて説明しました。<br><br>次回以降もC言語のさまざまな文法を説明していきますが、プログラムの大まかな構成は今回の内容ですべて説明できます。もしプログラムの構成が分からなくなった場合には、もう一度今回の内容を読み直してください。</p>

</blockquote>
<h2>演習問題</h2>

<blockquote>
<p>今回の内容を踏まえて、以下の演習問題に取り組んでください。</p>

<h3>演習 1−1</h3>

<p>以下のプログラムをコンパイル・実行すると、どのような表示がされるか確認してください。</p>

<div><pre class="code">#include &lt;stdio.h&gt;

int main() {
    printf("2 * 8 = %d\n", 2 * 8);
    printf("36 = %d * %d\n", 3, 12);
    return 0;
}</pre></div>

<h3>演習 1−2</h3>

<p>以下のプログラムをコンパイルするとコンパイルエラーが発生します。 コンパイルエラーが発生する理由を考えて、修正方法を考えてください。</p>

<div><pre class="code">
#include &lt;stdio.h&gt;

int main() {
    printf("The quick brown fox
            jumps over
            the lazy dog.");
    return 0;
}</pre></div>

<h3>演習 1−3</h3>

<p>以下のプログラムと同じ表示をするプログラムを printf 関数を 1 回しか使わずに記述してください。</p>
<p>ヒント: \n は文字列の途中に書くこともできます。</p>

<div><pre class="code">
#include &lt;stdio.h&gt;

int main() {
    printf("%d apples\n", 4);
    printf("%d apples\n", 9);
    printf("%d apples\n", 16);
    return 0;
</pre></div>

</blockquote>
</div>

<p><a href="index.html">目次</a></p>

<p class="footnote"><br/>Copyright 2009-2011 the Compview project,
Tokyo Institute of Technology.  All rights reserved.</p>
</body></html>
