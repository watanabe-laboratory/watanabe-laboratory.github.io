# fractal.pl
# フラクタル図形(シェルピンスキーの三角形)を書くプログラム
# Author: YAMAZAKI Tadashi <tyam@is.titech.ac.jp>

program main
1: if $1 != 0 goto 3
2:   $1 = 9
3: &fractal
4: return $2
program end.

program fractal
1: $12 = 0
2: $13 = 0
3: $2 = 0
4: $15 = 0
5: $16 = 0
6: $17 = 0
7: $18 = 0
8: $19 = 0
9: $20 = 0
10: $21 = 0
11: $22 = 0
12: $12 = $1 - 1
13: $12 = $12 / 2
14: $13 = $12
15: $2 = 0
16: $16 = $1-1
17: if $16 <= 0 goto 23
18:   $21 = $16
19:   &pow10
20:   $2 = $2+$22
21:   $16 = $16 - 1
22: goto 17
23: $2 = $2+1
24: $21 = $12
25: &pow10
26: $2 = $2 - $22
27: $17 = $13
28: if $17 <= 0 goto 59
29:   print($2)
30:   $15 = 0
31:   $21 = 0
32:   &pow10
33:   $15 = $15+$22
34:   $16 = $1 - 2
35:   if $16 <= 0 goto 53
36:     $21 = $16 - 1
37:     &pow10
38:     $18 = $2 / $22
39:     $18 = $18 % 2
40:     $21 = $16 + 1
41:     &pow10
42:     $19 = $2 / $22
43:     $19 = $19 % 2
44:     $20 = $18 + $19
45:     $20 = $20 + 1
46:     $20 = $20 % 2
47:     $21 = $16
48:     &pow10
49:     $20 = $20 * $22
50:     $15 = $15 + $20
51:     $16 = $16 - 1
52:   goto 35
53:   $21 = $1 - 1
54:   &pow10
55:   $15 = $15 + $22
56:   $2 = $15
57:   $17 = $17 - 1
58:   goto 28
59: # Finish
program end.

program pow10 # $22 = 10**$21
1: $22 = 1
2: if $21 <= 0 goto 6
3:   $22 = $22 * 10
4:   $21 = $21 - 1
5: goto 2
6: # Finish
program end.

